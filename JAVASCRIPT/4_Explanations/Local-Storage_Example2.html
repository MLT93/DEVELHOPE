<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

  <script>
    const user = {
      id: 1,
      name: "John",
      age: 18,
    };

    /* IIFE (Immediately Invoked Function Expression) es una función que se auto-invoca inmediatamente */

    /* IIFE - Arrow function */
    (() => {
      /* Recuerda que para enviar un objeto completo debes de transformarlo a un JSON string */
      localStorage.setItem("user", JSON.stringify(user))
    })();


    /* IIFE - Function normal */
    (function getStorage() {
      /* Recuerda que todo lo que subas y recibas del Local Storage, será siempre un String */
      console.log('Typeof del Local Storage ->', typeof localStorage.getItem("user"));

      /* Por lo tanto hay que parsearlo: */
      const localStorageData = localStorage.getItem("user");
      const localStorageObject = JSON.parse(localStorageData);
      const { age, id, name } = localStorageObject

      console.log('Typeof del Local Storage Parseado ->', typeof localStorageObject);
      console.log('Age:', age, 'ID:', id, 'Name:', name);

    })(user); 
  </script>
</body>

</html>
